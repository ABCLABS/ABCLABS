<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.2">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-10-08T22:35:58+08:00</updated><id>http://localhost:4000/</id><title type="html">ABC lab</title><subtitle></subtitle><author><name>ABC</name></author><entry><title type="html">解决服务器磁盘空间不足</title><link href="http://localhost:4000/log/2018/10/08/%E8%A7%A3%E5%86%B3%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/" rel="alternate" type="text/html" title="解决服务器磁盘空间不足" /><published>2018-10-08T22:05:01+08:00</published><updated>2018-10-08T22:05:01+08:00</updated><id>http://localhost:4000/log/2018/10/08/%E8%A7%A3%E5%86%B3%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3</id><content type="html" xml:base="http://localhost:4000/log/2018/10/08/%E8%A7%A3%E5%86%B3%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/">&lt;h1 align = 'center'&gt;
    解决服务器磁盘空间不足
&lt;/h1&gt;

&lt;p&gt;
    今天下午，服务器提示磁盘剩余空间不足，使用df命令查看，发现/目录下的磁盘已经没有多余空间，然后使用fdisk -l查看所有磁盘，发现sdb、sdc两块2T的硬盘未
    被使用，于是开始为之分区，然后挂载:
    
    &lt;blockquote&gt;
        
    sudo fdisk /dev/sdc  
    
    &lt;/blockquote&gt;
    &lt;pre&gt;
    之后进入command状态：
    输入 m 查看帮助
    输入 p 查看 /dev/sdb 分区的状态
    输入 n 创建sdb这块硬盘的分区
    选 p primary =&gt;输入　p
    Partition number =&gt;分一个区所以输入　1
    其他的默认回车即可
    最后输入 w 保存并退出 Command 状态。
&lt;/pre&gt;
然后格式化磁盘:
&lt;blockquote&gt;
    sudo mkfs.ext4 /dev/sdb1
&lt;/blockquote&gt;
报错，如下:
&lt;blockquote&gt;
    filesystem with 0 blocks, specify higher inode_ratio (-i) or lower inode count (-N).
&lt;/blockquote&gt;
原因在于Linux内核在重新分区后没有更新分区表，手动读取并更新，执行命令:
&lt;blockquote&gt;
    blockdev --rereadpt 
&lt;/blockquote&gt;
问题解决，然后挂载磁盘sdc到home目录，但挂载后发现原本home目录中的文件消失了，这是因为home目录中的文件存放在了磁盘sda中，于是首先在/下新建跳板目录：
&lt;blockquote&gt;
    sudo mkdir /home2
&lt;/blockquote&gt;
    挂载sdc：
    &lt;blockquote&gt;
        sudo mount /dev/sdc /home2
    &lt;/blockquote&gt;

复制home下的文件：
&lt;blockquote&gt;
    sudo cp -r /home/* /home2
&lt;/blockquote&gt;
修改/home和/home2的名字：
&lt;blockquote&gt;
    &lt;pre&gt;
    sudo mv /home /homeBackup
    sudo mv /home2 /home
&lt;/pre&gt;
&lt;/blockquote&gt;
设置自动挂载，找到sdc的UUID：
&lt;blockquote&gt;
        sudo blkid
&lt;/blockquote&gt;
配置挂载：
&lt;blockquote&gt;
        sudo vim /etc/fstab
&lt;/blockquote&gt;

输入：
&lt;blockquote&gt;
        UUID=yourUUID /home ext4 defaults 0 1
&lt;/blockquote&gt;
保存后，运行sudo mount -a，检查挂载是否正常，然后重启机器。
&lt;/p&gt;

&lt;p&gt;
    在配置好磁盘后发现找不到nvidia的驱动了，报错：
    &lt;blockquote&gt;
            NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.
    &lt;/blockquote&gt;
网上查资料无果，于是重装了NVIDIA Driver。
&lt;/p&gt;</content><author><name>ABC</name></author><category term="log" /><summary type="html">解决服务器磁盘空间不足</summary></entry><entry><title type="html">Log example</title><link href="http://localhost:4000/2018/09/03/log_example/" rel="alternate" type="text/html" title="Log example" /><published>2018-09-03T20:56:55+08:00</published><updated>2018-09-03T20:56:55+08:00</updated><id>http://localhost:4000/2018/09/03/log_example</id><content type="html" xml:base="http://localhost:4000/2018/09/03/log_example/">&lt;h1 class=&quot;blockquote-center&quot;&gt;日志示例&lt;/h1&gt;    

&lt;p&gt;写成html,放在 'ABCLABS.github,io/_posts'文件夹下即可.html头的格式见日志示例的头部.&lt;/p&gt;</content><author><name>ABC</name></author><category term="" /><category term="" /><summary type="html">日志示例</summary></entry></feed>